<% if (theme.plugins.highlightjs.css) { %>
  <script>volantis.css("<%- theme.plugins.highlightjs.css %>");</script>
<% } %>

<% if (theme.plugins.highlightjs.js) { %>
  <%- js(theme.plugins.highlightjs.js) %>
  <script src="https://cdn.jsdelivr.net/npm/highlightjs-line-numbers.js@2.8.0/dist/highlightjs-line-numbers.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <script>hljs.initLineNumbersOnLoad({ singleLine: true });</script>
  <% } %>
  <script>volantis.requestAnimationFrame(hljs.highlightAll)</script>
  <script>
  volantis.pjax.push(()=>{
      document.querySelectorAll('pre code').forEach((block) => {
        hljs.highlightBlock(block);
        hljs.lineNumbersBlock(block, { singleLine: true });
      });
  },"highlightjs")
  </script>


<% if(theme.plugins.highlightjs.copy_code){ %>
<script>
  function pjax_highlightjs_copyCode(){
    if (!(document.querySelector(".highlight .code pre") ||
      document.querySelector(".article pre code"))) {
      return;
    }
    VolantisApp.copyCode(".highlight .code pre, .article pre code")
  }
  volantis.requestAnimationFrame(pjax_highlightjs_copyCode)
  volantis.pjax.push(pjax_highlightjs_copyCode)
</script>
<% } %>

<%# "原代码" %>
<script>
  <% if (theme.plugins.highlightjs.css) { %>
    volantis.css("<%- theme.plugins.highlightjs.css %>");
  <% } %>
  <% if (theme.plugins.highlightjs.js) { %>
    volantis.js("<%- theme.plugins.highlightjs.js %>").then(()=>{
      volantis.requestAnimationFrame(hljs.highlightAll)
    })
    volantis.pjax.push(()=>{
      document.querySelectorAll('pre code').forEach((block) => {
        hljs.highlightElement(block);
      });
    },"highlightjs")
  <% } %>
  <% if(theme.plugins.highlightjs.copy_code){ %>
    function pjax_highlightjs_copyCode(){
      if (!(document.querySelector(".highlight .code pre") ||
        document.querySelector(".article pre code"))) {
        return;
      }
      VolantisApp.utilCopyCode(".highlight .code pre, .article pre code")
    }
    volantis.requestAnimationFrame(pjax_highlightjs_copyCode)
    volantis.pjax.push(pjax_highlightjs_copyCode)
  <% } %>
  </script>